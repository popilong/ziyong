#è‡ªç”¨clashåŸºç¡€é…ç½®ï¼Œè‡ªè¡Œå¯¼å…¥æ·»åŠ æœºåœºè®¢é˜…åå³å¯ï¼Œè§ä¸‹æ–‡æ ‡æ³¨â€œæ­¤å¤„å¡«å†™æœºåœºè®¢é˜…â€æ–‡å­—

mixed-port: 7890

tun:
    enable: true
    stack: system
    dns-hijack:
        - any:53
    auto-route: true
    auto-detect-interface: true

allow-lan: true
mode: rule
log-level: info
ipv6: false
udp: true
profile:
  store-fake-ip: true
external-controller: 0.0.0.0:9090

dns:
    enable: true
    ipv6: false
    enhanced-mode: fake-ip
    fake-ip-filter:
        - 'connect.rom.miui.com'
        - 'localhost.ptlogin2.qq.com'
        - '+.msftnsci.com'
        - '+.msftconnecttest.com'
        - '+.gstatic.com'
        - '+.stun.*.*'
        - '+.stun.*.*.*'
        - '+.stun.*.*.*.*'
        - '+.time.*'
        - '+.time.*.*'
        - '+.time.*.*.*'
        - '+.ntp.*'
        - '+.ntp.*.*'
        - '+.ntp.*.*.*'
    default-nameserver:
        - 114.114.114.114
        - 223.5.5.5
        - 119.29.29.29
        - 8.8.4.4
    nameserver:
        - https://dns.alidns.com/dns-query
        - https://doh.pub/dns-query

proxies:

p: &p
  type: http
  interval: 3600
  health-check:
    enable: true
    url: http://www.gstatic.com/generate_204
    interval: 600

c: &c
  type: http
  behavior: classical
  interval: 86400

pr: &pr
  type: select
  proxies:
    - é»˜è®¤
    - å…¨éƒ¨
    - random-auto
    - é¦™æ¸¯
    - å°æ¹¾
    - æ—¥æœ¬
    - æ–°åŠ å¡
    - ç¾å›½
    - DIRECT

proxy-providers:

#æ‰€æœ‰è®¢é˜…æœºåœºèŠ‚ç‚¹
  All: &All
    <<: *p
    url: "  æ­¤å¤„å¡«å†™æœºåœºè®¢é˜…  æ­¤å¤„å¡«å†™æœºåœºè®¢é˜…  æ­¤å¤„å¡«å†™æœºåœºè®¢é˜…  "
    path: ./all.yaml
   
#random-auto
  auto:
    <<: *All
    filter: (æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬|SG|Singapore|å°|æ¹¾|TW|Taiwan|æ—¥|æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|Japan|æ¸¯|ğŸ‡­ğŸ‡°|HK|Hong|ç¾|ğŸ‡ºğŸ‡²|US|States|American|æ¬§|æ³•|å¾·|ä¿„).*(?:.*1.0|0.2|0.3|0.5|0.6|0.8|1|1.5|2|3) 

#é¦™æ¸¯åˆ†ç»„
  hk:
    <<: *All
    filter: "æ¸¯|é¦™æ¸¯|hk|HK|hongkong|HongKong|ğŸ‡­ğŸ‡°"

#å°æ¹¾åˆ†ç»„
  tw:
    <<: *All
    filter: "å°|å°æ¹¾|tw|TW|taiwan|Taiwan"

#æ—¥æœ¬åˆ†ç»„
  jp:
    <<: *All
    filter: "æ—¥|æ—¥æœ¬|jp|JP|japan|Japan|ğŸ‡¯ğŸ‡µ"
 
#æ–°åŠ å¡åˆ†ç»„
  sg:
    <<: *All
    filter: "æ–°|æ–°åŠ å¡|ç‹®åŸ|sg|SG|singapore|ğŸ‡¸ğŸ‡¬"

#ç¾å›½åˆ†ç»„
  us:
    <<: *All
    filter: "ç¾|ç¾å›½|us|US|USA|ğŸ‡ºğŸ‡¸"

proxy-groups:

  - name: é»˜è®¤
    type: select
    proxies:
      - å…¨éƒ¨
      - random-auto
      - é¦™æ¸¯
      - å°æ¹¾
      - æ—¥æœ¬
      - æ–°åŠ å¡
      - ç¾å›½
      - DIRECT

#èŠ‚ç‚¹åŠç­–ç•¥

  - name: å…¨éƒ¨
    type: select
    use:
      - All

  - name: random-auto
    type: url-test
    use:
      - auto

#Google

  - name: Google
    <<: *pr

#ç¤¾äº¤

  - name: Telegram
    <<: *pr

  - name: Instagram
    <<: *pr


#æµåª’ä½“
        
  - name: YouTube
    <<: *pr
      
  - name: NETFLIX
    <<: *pr
      
  - name: Spotify
    <<: *pr
      
  - name: Apple
    <<: *pr

  - name: Microsoft
    <<: *pr


  - name: Unknownsite
    <<: *pr

#åˆ†éš”ï¼Œä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„

  - name: é¦™æ¸¯
    type: url-test
    use:
      - hk

  - name: å°æ¹¾
    type: url-test
    use:
      - tw

  - name: æ—¥æœ¬
    type: url-test
    use:
      - jp

  - name: ç¾å›½
    type: url-test
    use:
      - us

  - name: æ–°åŠ å¡
    type: url-test
    use:
      - sg


rule-providers:

  Google:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml"
    path: ./rule_providers/Google.yaml

  YouTube:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
    path: ./rule_providers/YouTube.yaml

  Telegram:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"
    path: ./rule_providers/Telegram.yaml

  Netflix:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml"
    path: ./rule_providers/Netflix.yaml
    
  Spotify:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml"
    path: ./rule_providers/Spotify.yaml

  Apple:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml"
    path: ./ruleset/Apple.yaml

  Microsoft:
    <<: *c
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./ruleset/Microsoft.yaml


rules:
  - IP-CIDR,127.0.0.1/32,REJECT,no-resolve
  - RULE-SET,YouTube,YouTube
  - RULE-SET,Telegram,Telegram
  - RULE-SET,Netflix,NETFLIX
  - RULE-SET,Google,Google
  - RULE-SET,Spotify,Spotify
  - RULE-SET,Apple,Apple
  - RULE-SET,Microsoft,Microsoft
  - GEOIP,CN,DIRECT
  - MATCH,Unknownsite. 
